<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Class EpasClient
   </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Class EpasClient
   ">
    <meta name="generator" content="docfx 2.59.4.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/westpay.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html" style='padding-top:13px'>
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../articles/intro.html" title="Articles">Articles</a>
                      </li>
                      <li>
                          <a href="../api/index.html" title="API Documentation">API Documentation</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="Westpay.Epas.html" title="Westpay.Epas" class="">Westpay.Epas</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="Westpay.Epas.AdminOperation.html" title="AdminOperation" class="">AdminOperation</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.AdminResponse.html" title="AdminResponse" class="">AdminResponse</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.AltMethodTransaction.html" title="AltMethodTransaction" class="">AltMethodTransaction</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.ApiResult.html" title="ApiResult" class="">ApiResult</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.AuthorisationChannel.html" title="AuthorisationChannel" class="">AuthorisationChannel</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.AuthorisingEntity.html" title="AuthorisingEntity" class="">AuthorisingEntity</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.BufferTools.html" title="BufferTools" class="">BufferTools</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.CardAcceptedEventArgs.html" title="CardAcceptedEventArgs" class="">CardAcceptedEventArgs</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.CurrencyCodes.html" title="CurrencyCodes" class="">CurrencyCodes</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.EnableCardReaderOptions.html" title="EnableCardReaderOptions" class="">EnableCardReaderOptions</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.EnableReadersResponse.html" title="EnableReadersResponse" class="">EnableReadersResponse</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.EntryMethod.html" title="EntryMethod" class="">EntryMethod</a>
                          </li>
                          <li class="active">
                            <a href="Westpay.Epas.EpasClient.html" title="EpasClient" class="active">EpasClient</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.EpasClient.CardAcceptedNotification.html" title="EpasClient.CardAcceptedNotification" class="">EpasClient.CardAcceptedNotification</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.EpasClient.CardActionNotification.html" title="EpasClient.CardActionNotification" class="">EpasClient.CardActionNotification</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.EpasClient.EpasMessageReceiver.html" title="EpasClient.EpasMessageReceiver" class="">EpasClient.EpasMessageReceiver</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.EpasClient.StatusNotification.html" title="EpasClient.StatusNotification" class="">EpasClient.StatusNotification</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.ErrorConditions.html" title="ErrorConditions" class="">ErrorConditions</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.IClientApp.html" title="IClientApp" class="">IClientApp</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.LastTransactionResponse.html" title="LastTransactionResponse" class="">LastTransactionResponse</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.LastTransactionResponse.CardData.html" title="LastTransactionResponse.CardData" class="">LastTransactionResponse.CardData</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.LastTransactionResponse.DccData.html" title="LastTransactionResponse.DccData" class="">LastTransactionResponse.DccData</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.LastTransactionResponse.EmvData.html" title="LastTransactionResponse.EmvData" class="">LastTransactionResponse.EmvData</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.LastTransactionResponse.MerchantData.html" title="LastTransactionResponse.MerchantData" class="">LastTransactionResponse.MerchantData</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.LastTransactionResponse.TransactionData.html" title="LastTransactionResponse.TransactionData" class="">LastTransactionResponse.TransactionData</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.LoginResponse.html" title="LoginResponse" class="">LoginResponse</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.LogLevel.html" title="LogLevel" class="">LogLevel</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.LogoutResponse.html" title="LogoutResponse" class="">LogoutResponse</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.OperatingParameters.html" title="OperatingParameters" class="">OperatingParameters</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.PurchaseRequest.html" title="PurchaseRequest" class="">PurchaseRequest</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.PurchaseTransactionAmounts.html" title="PurchaseTransactionAmounts" class="">PurchaseTransactionAmounts</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.ReceiptData.html" title="ReceiptData" class="">ReceiptData</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.ReceiptData.AuthorisationData.html" title="ReceiptData.AuthorisationData" class="">ReceiptData.AuthorisationData</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.ReceiptData.CardData.html" title="ReceiptData.CardData" class="">ReceiptData.CardData</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.ReceiptData.DccData.html" title="ReceiptData.DccData" class="">ReceiptData.DccData</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.ReceiptData.EmvData.html" title="ReceiptData.EmvData" class="">ReceiptData.EmvData</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.ReceiptData.MerchantData.html" title="ReceiptData.MerchantData" class="">ReceiptData.MerchantData</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.ReceiptData.TransactionData.html" title="ReceiptData.TransactionData" class="">ReceiptData.TransactionData</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.ReceiptData.TranslatedTextId.html" title="ReceiptData.TranslatedTextId" class="">ReceiptData.TranslatedTextId</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.ReceiptVersion.html" title="ReceiptVersion" class="">ReceiptVersion</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.RefundRequest.html" title="RefundRequest" class="">RefundRequest</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.ServiceEnableType.html" title="ServiceEnableType" class="">ServiceEnableType</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.SimpleResponse.html" title="SimpleResponse" class="">SimpleResponse</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.TerminalEnvironment.html" title="TerminalEnvironment" class="">TerminalEnvironment</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.TerminalNetworkConnection.html" title="TerminalNetworkConnection" class="">TerminalNetworkConnection</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.TransactionOutcome.html" title="TransactionOutcome" class="">TransactionOutcome</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.TransactionRequest.html" title="TransactionRequest" class="">TransactionRequest</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.TransactionResponse.html" title="TransactionResponse" class="">TransactionResponse</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.TransactionType.html" title="TransactionType" class="">TransactionType</a>
                          </li>
                          <li class="">
                            <a href="Westpay.Epas.VerificationMethod.html" title="VerificationMethod" class="">VerificationMethod</a>
                          </li>
                        </ul>  </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="Westpay.Epas.EpasClient">
  
  
  <h1 id="Westpay_Epas_EpasClient" data-uid="Westpay.Epas.EpasClient" class="text-break">Class EpasClient
  </h1>
  <div class="markdown level0 summary"><p>The EpasClient class provides the functionality required to operate a Westpay terminal.</p>
</div>
  <div class="markdown level0 conceptual"></div>
  <div class="inheritance">
    <h5>Inheritance</h5>
    <div class="level0"><span class="xref">System.Object</span></div>
    <div class="level1"><span class="xref">EpasClient</span></div>
  </div>
  <div class="inheritedMembers">
    <h5>Inherited Members</h5>
    <div>
      <span class="xref">System.Object.Equals(System.Object)</span>
    </div>
    <div>
      <span class="xref">System.Object.Equals(System.Object, System.Object)</span>
    </div>
    <div>
      <span class="xref">System.Object.GetHashCode()</span>
    </div>
    <div>
      <span class="xref">System.Object.GetType()</span>
    </div>
    <div>
      <span class="xref">System.Object.MemberwiseClone()</span>
    </div>
    <div>
      <span class="xref">System.Object.ReferenceEquals(System.Object, System.Object)</span>
    </div>
    <div>
      <span class="xref">System.Object.ToString()</span>
    </div>
  </div>
  <h6><strong>Namespace</strong>: <a class="xref" href="Westpay.Epas.html">Westpay.Epas</a></h6>
  <h6><strong>Assembly</strong>: EpasClientLibrary.dll</h6>
  <h5 id="Westpay_Epas_EpasClient_syntax">Syntax</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public class EpasClient</code></pre>
  </div>
  <h3 id="constructors">Constructors
  </h3>
  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Wrapper.cs&amp;version=GBmain&amp;line=94">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient__ctor_" data-uid="Westpay.Epas.EpasClient.#ctor*"></a>
  <h4 id="Westpay_Epas_EpasClient__ctor_Westpay_Epas_IClientApp_" data-uid="Westpay.Epas.EpasClient.#ctor(Westpay.Epas.IClientApp)">EpasClient(IClientApp)</h4>
  <div class="markdown level1 summary"><p>Constructor</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public EpasClient(IClientApp app)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.IClientApp.html">IClientApp</a></td>
        <td><span class="parametername">app</span></td>
        <td><p>The client application</p>
</td>
      </tr>
    </tbody>
  </table>
  <h3 id="fields">Fields
  </h3>
  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Handlers.cs&amp;version=GBmain&amp;line=186">View Source</a>
  </span>
  <h4 id="Westpay_Epas_EpasClient_BusyStatus" data-uid="Westpay.Epas.EpasClient.BusyStatus">BusyStatus</h4>
  <div class="markdown level1 summary"><p>Handler for busy status notifications</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public EpasClient.StatusNotification BusyStatus</code></pre>
  </div>
  <h5 class="fieldValue">Field Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.EpasClient.StatusNotification.html">EpasClient.StatusNotification</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_BusyStatus_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>There are times when the terminal is going to be busy for an unknown time, normally when it is 
downloading new parameters. In these situations the terminal will notify its busy status by calling this 
callback with busy set to <code>true</code>. When the activity ends it will call this callback again with busy set to <code>false</code>.</p>
</div>
  <h5 id="Westpay_Epas_EpasClient_BusyStatus_examples">Examples</h5>
  <pre><code>...
mEpas.BusyStatus = HandleBusyState;
...

public void HandleBusyState(bool busy)
{
    if (InvokeRequired)
    {
        Invoke(new Action(() => HandleBusyState(busy)));
    }
    else
    {
        if (busy)
        {
            lblBusy.BackColor = Color.LightPink;
            lblBusy.ForeColor = Color.DarkRed;
            lblBusy.Text = &quot;BUSY&quot;;
        }
        else
        {
            lblBusy.BackColor = Color.Transparent;
            lblBusy.ForeColor = Color.Gray;
            lblBusy.Text = &quot;OK&quot;;
        }
    }
}</code></pre>

  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Handlers.cs&amp;version=GBmain&amp;line=146">View Source</a>
  </span>
  <h4 id="Westpay_Epas_EpasClient_CardAccepted" data-uid="Westpay.Epas.EpasClient.CardAccepted">CardAccepted</h4>
  <div class="markdown level1 summary"><p>The handler for card accepted notifications with MaskedCardNumber and CNA</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public EpasClient.CardAcceptedNotification CardAccepted</code></pre>
  </div>
  <h5 class="fieldValue">Field Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.EpasClient.CardAcceptedNotification.html">EpasClient.CardAcceptedNotification</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_CardAccepted_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>
The terminal�s configuration includes a list of card ranges that is used to identify valid card numbers. When 
a payment card is presented and is considered valid then this callback is used to notify the ECR of the 
masked card number and Card Number Alias (CNA). The masking means that only the first six digits and last four digits of the card 
number are shown. The rest are replaced with asterisk (<code>*</code>) characters. 
</p>
<p>
Note that loyalty cards are handled separately, see <a class="xref" href="Westpay.Epas.IClientApp.html#Westpay_Epas_IClientApp_LoyaltyCardPresented_System_String_System_Boolean__">LoyaltyCardPresented(String, out Boolean)</a>.
</p>
</div>
  <h5 id="Westpay_Epas_EpasClient_CardAccepted_examples">Examples</h5>
  <pre><code>...
mEpas.CardAccepted = HandleCardAccepted;
...

public void HandleCardAccepted(CardAcceptedEventArgs args)
{
    if (InvokeRequired)
    {
        Invoke(new Action(() => HandleCardAccepted(args)));
    }
    else
    {
        string cardNumberAliasHexString = BufferTools.ByteArrayToHexString(args.CardNumberAlias);
        ttToolTips.SetToolTip(lblCardPresent, args.MaskedCardNumber + &quot;\nCNA &quot; + cardNumberAliasHexString);
        Log(&quot;Card accepted: &quot; + args.MaskedCardNumber);
        Log(&quot;Card Number Alias: &quot; + cardNumberAliasHexString);
    }
}</code></pre>

  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Handlers.cs&amp;version=GBmain&amp;line=108">View Source</a>
  </span>
  <h4 id="Westpay_Epas_EpasClient_CardStatus" data-uid="Westpay.Epas.EpasClient.CardStatus">CardStatus</h4>
  <div class="markdown level1 summary"><p>The handler for card insert and removal notifications</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public EpasClient.CardActionNotification CardStatus</code></pre>
  </div>
  <h5 class="fieldValue">Field Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.EpasClient.CardActionNotification.html">EpasClient.CardActionNotification</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_CardStatus_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>
This callback is used when the terminal recognises that a card has been inserted in, or removed from, the 
card reader. The ECR might use this status to prompt the cardholder to remove the card when the 
transaction is complete.
</p>
<p>
This notification only applies to the smart card reader. Cards that are tapped or swiped do not trigger this 
callback.
</p>
<p>
Note that if a card inserted while the card readers in the terminal are not enabled then this notification is 
used as soon as the readers are enabled.
</p>
</div>
  <h5 id="Westpay_Epas_EpasClient_CardStatus_examples">Examples</h5>
  <pre><code>...
mEpas.CardStatus = CardStatus;
...

public void CardStatus(bool inserted)
{
    if (InvokeRequired)
    {
        Invoke(new Action(() => CardStatus(inserted)));
    }
    else
    {
        if (inserted)
        {
            lblCardPresent.Text = &quot;CARD INSERTED&quot;;
        }
        else
        {
            lblCardPresent.Text = &quot;CARD TAKEN&quot;;
        }
    }
}</code></pre>

  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Handlers.cs&amp;version=GBmain&amp;line=226">View Source</a>
  </span>
  <h4 id="Westpay_Epas_EpasClient_LinkStatus" data-uid="Westpay.Epas.EpasClient.LinkStatus">LinkStatus</h4>
  <div class="markdown level1 summary"><p>Handler for link status notifications</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public EpasClient.StatusNotification LinkStatus</code></pre>
  </div>
  <h5 class="fieldValue">Field Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.EpasClient.StatusNotification.html">EpasClient.StatusNotification</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_LinkStatus_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>This callback is called when the EPAS client library detects a change in the link status between the terminal 
and the ECR. When the linkUp parameter is true, the link is functioning. When the parameter is false then 
there has been a link failure and the ECR should take appropriate action.</p>
</div>
  <h5 id="Westpay_Epas_EpasClient_LinkStatus_examples">Examples</h5>
  <pre><code>...
mEpas.LinkStatus = HandleLinkState;
...

public void HandleLinkState(bool linkUp)
{
    if (InvokeRequired)
    {
        Invoke(new Action(() => HandleLinkState(linkUp)));
    }
    else
    {
        if (linkUp)
        {
            lblLink.BackColor = Color.PaleGreen;
            lblLink.ForeColor = Color.DarkGreen;
            lblLink.Text = &quot;OK&quot;;
        }
        else
        {
            lblLink.BackColor = Color.LightPink;
            lblLink.ForeColor = Color.DarkRed;
            lblLink.Text = &quot;DOWN&quot;;
        }
    }
}</code></pre>

  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Handlers.cs&amp;version=GBmain&amp;line=260">View Source</a>
  </span>
  <h4 id="Westpay_Epas_EpasClient_RawMessageHandler" data-uid="Westpay.Epas.EpasClient.RawMessageHandler">RawMessageHandler</h4>
  <div class="markdown level1 summary"><p>Handler for raw EPAS XML messages.  This should only be used with
a very good reason.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public EpasClient.EpasMessageReceiver RawMessageHandler</code></pre>
  </div>
  <h5 class="fieldValue">Field Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.EpasClient.EpasMessageReceiver.html">EpasClient.EpasMessageReceiver</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_RawMessageHandler_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>
It may be useful or necessary for the ECR to be able to directly inspect EPAS XML messages that are 
received in the library. In these situations, the ECR can assign a handler to the RawMessageHandler
callback.
</p>
<p>
This feature is only provided as a fallback way to deal with situations that the library does not handle. 
There is no clear usage for this, other than that it allows the ECR to directly handle EPAS messages to 
achieve some very specific objective that it cannot achieve via the library API.
</p>
<p>
In normal use the ECR should not need to provide a handler for this callback.
</p>
</div>
  <h5 id="Westpay_Epas_EpasClient_RawMessageHandler_examples">Examples</h5>
  <pre><code>...
mEpas.RawMessageHandler = HandleIncomingXML;
...

private void HandleIncomingXML(string rawXml)
{
    Log(LogLevel.Debug, &quot;Incoming XML:&quot;);
    Log(LogLevel.Debug, rawXml);
}</code></pre>

  <h3 id="properties">Properties
  </h3>
  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Wrapper.cs&amp;version=GBmain&amp;line=31">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_Options_" data-uid="Westpay.Epas.EpasClient.Options*"></a>
  <h4 id="Westpay_Epas_EpasClient_Options" data-uid="Westpay.Epas.EpasClient.Options">Options</h4>
  <div class="markdown level1 summary"><p>Operating parameters for the library</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public OperatingParameters Options { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.OperatingParameters.html">OperatingParameters</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h3 id="methods">Methods
  </h3>
  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.CashAdvance.cs&amp;version=GBmain&amp;line=33">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_CashAdvance_" data-uid="Westpay.Epas.EpasClient.CashAdvance*"></a>
  <h4 id="Westpay_Epas_EpasClient_CashAdvance_System_Decimal_Westpay_Epas_TransactionResponse__" data-uid="Westpay.Epas.EpasClient.CashAdvance(System.Decimal,Westpay.Epas.TransactionResponse@)">CashAdvance(Decimal, out TransactionResponse)</h4>
  <div class="markdown level1 summary"><p>Performs a cash advance / withdrawal transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult CashAdvance(decimal cashAmount, out TransactionResponse response)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Decimal</span></td>
        <td><span class="parametername">cashAmount</span></td>
        <td><p>Amount of cash to withdraw</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Westpay.Epas.TransactionResponse.html">TransactionResponse</a></td>
        <td><span class="parametername">response</span></td>
        <td><p>Transaction response</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>Standard ApiResult values</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_CashAdvance_System_Decimal_Westpay_Epas_TransactionResponse___examples">Examples</h5>
  <pre><code>/// &lt;summary>
/// Runs a cash advance transaction.
/// &lt;/summary>
/// &lt;param name=&quot;amount&quot;>Cash amount&lt;/param>
/// sending the transaction result&lt;/param>
public void CashAdvance(decimal amount)
{
    Log($&quot;Cash Advance of {amount:.00}&quot;);
    TransactionResponse response;
    ApiResult result = mEpas.CashAdvance(amount, out response);
    if (result == ApiResult.OK)
    {
        HandleTxnResponse(response);
    }
    LogApiResult(result, &quot;Cash Advance: &quot; + response?.ToString());
}</code></pre>

  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Wrapper.cs&amp;version=GBmain&amp;line=113">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_Close_" data-uid="Westpay.Epas.EpasClient.Close*"></a>
  <h4 id="Westpay_Epas_EpasClient_Close" data-uid="Westpay.Epas.EpasClient.Close">Close()</h4>
  <div class="markdown level1 summary"><p>Close the library</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Close()</code></pre>
  </div>
  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Connect.cs&amp;version=GBmain&amp;line=86">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_ConnectNetwork_" data-uid="Westpay.Epas.EpasClient.ConnectNetwork*"></a>
  <h4 id="Westpay_Epas_EpasClient_ConnectNetwork_Westpay_Epas_TerminalNetworkConnection_System_Boolean_" data-uid="Westpay.Epas.EpasClient.ConnectNetwork(Westpay.Epas.TerminalNetworkConnection,System.Boolean)">ConnectNetwork(TerminalNetworkConnection, Boolean)</h4>
  <div class="markdown level1 summary"><p>Attempts to create a network connection to the terminal</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult ConnectNetwork(TerminalNetworkConnection connectionDetails, bool forceReconnect = false)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.TerminalNetworkConnection.html">TerminalNetworkConnection</a></td>
        <td><span class="parametername">connectionDetails</span></td>
        <td><p>Details of how to connect to the terminal via network</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Boolean</span></td>
        <td><span class="parametername">forceReconnect</span></td>
        <td><p>Set to <code>true</code> to close an existing connection and force a new connection to be made</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>A standard <a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a> value</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_ConnectNetwork_Westpay_Epas_TerminalNetworkConnection_System_Boolean__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>
The ConnectNetwork method attempts to connect to the terminal over a TCP/IP network connection. The 
<code data-dev-comment-type="paramref" class="paramref">connectionDetails</code> parameter contains the details needed for the connection.
</p>
<p>
If the <code data-dev-comment-type="paramref" class="paramref">forceReconnect</code> parameter is <code>true</code> then if there is already a connection in place that connection will be 
closed and a new one will be created. Otherwise, if <code data-dev-comment-type="paramref" class="paramref">forceReconnect</code> is <code>false</code>, if there is already a connection 
in place then this method will just return <a class="xref" href="Westpay.Epas.ApiResult.html#Westpay_Epas_ApiResult_OK">OK</a>.
</p>
</div>
  <h5 id="Westpay_Epas_EpasClient_ConnectNetwork_Westpay_Epas_TerminalNetworkConnection_System_Boolean__examples">Examples</h5>
  <pre><code>private void ConnectToTerminal()
{
    Log(&quot;Connecting...&quot;);
    bool dataOk = true;
    TerminalNetworkConnection tc = new TerminalNetworkConnection();
    try
    {
        tc.TerminalConnectionDetails = new
        IPEndPoint(IPAddress.Parse(txtTerminalAddress.Text), int.Parse(txtTerminalPort.Text));
    }
    catch (Exception)
    {
        dataOk = false;
        LogError(&quot;Unable to parse terminal address and / or port&quot;);
    }

    tc.UseKeepAlive = optKeepalive.Checked;
    if (dataOk)
    {
        ApiResult result = mEpas.ConnectNetwork(tc, optForceReconnect.Checked);
        LogApiResult(result, &quot;Connect&quot;);
    }
}</code></pre>

  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Connect.cs&amp;version=GBmain&amp;line=124">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_ConnectUsb_" data-uid="Westpay.Epas.EpasClient.ConnectUsb*"></a>
  <h4 id="Westpay_Epas_EpasClient_ConnectUsb_System_String_System_Boolean_" data-uid="Westpay.Epas.EpasClient.ConnectUsb(System.String,System.Boolean)">ConnectUsb(String, Boolean)</h4>
  <div class="markdown level1 summary"><p>USB/serial connections are no longer supported.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">[Obsolete]
public ApiResult ConnectUsb(string comPort, bool forceReconnect = false)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">comPort</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.Boolean</span></td>
        <td><span class="parametername">forceReconnect</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Connect.cs&amp;version=GBmain&amp;line=147">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_Disconnect_" data-uid="Westpay.Epas.EpasClient.Disconnect*"></a>
  <h4 id="Westpay_Epas_EpasClient_Disconnect" data-uid="Westpay.Epas.EpasClient.Disconnect">Disconnect()</h4>
  <div class="markdown level1 summary"><p>Disconnect from the terminal</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult Disconnect()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>A standard <a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a> value</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_Disconnect_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>The Disconnect method closes the connection to the terminal, whether it is network or USB.</p>
</div>
  <h5 id="Westpay_Epas_EpasClient_Disconnect_examples">Examples</h5>
  <pre><code>private void btnDisconnect_Click()
{
    Log(&quot;Disconnecting&quot;);
    mEpas?.Disconnect();
}</code></pre>

  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.EnableReaders.cs&amp;version=GBmain&amp;line=13">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_EnableCardReaders_" data-uid="Westpay.Epas.EpasClient.EnableCardReaders*"></a>
  <h4 id="Westpay_Epas_EpasClient_EnableCardReaders_System_Boolean_Westpay_Epas_EnableCardReaderOptions_Westpay_Epas_EnableReadersResponse__" data-uid="Westpay.Epas.EpasClient.EnableCardReaders(System.Boolean,Westpay.Epas.EnableCardReaderOptions,Westpay.Epas.EnableReadersResponse@)">EnableCardReaders(Boolean, EnableCardReaderOptions, out EnableReadersResponse)</h4>
  <div class="markdown level1 summary"><p>Enables or disables the card readers on the terminal.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult EnableCardReaders(bool enable, EnableCardReaderOptions cardReaderOptions, out EnableReadersResponse response)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Boolean</span></td>
        <td><span class="parametername">enable</span></td>
        <td><p>True to enable the card readers, false to disable them.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Westpay.Epas.EnableCardReaderOptions.html">EnableCardReaderOptions</a></td>
        <td><span class="parametername">cardReaderOptions</span></td>
        <td></td>
      </tr>
      <tr>
        <td><a class="xref" href="Westpay.Epas.EnableReadersResponse.html">EnableReadersResponse</a></td>
        <td><span class="parametername">response</span></td>
        <td><p>Response from the terminal</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>Standard API result value</p>
</td>
      </tr>
    </tbody>
  </table>
  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.GetLastTransaction.cs&amp;version=GBmain&amp;line=35">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_GetLastTransaction_" data-uid="Westpay.Epas.EpasClient.GetLastTransaction*"></a>
  <h4 id="Westpay_Epas_EpasClient_GetLastTransaction_System_String_Westpay_Epas_LastTransactionResponse__" data-uid="Westpay.Epas.EpasClient.GetLastTransaction(System.String,Westpay.Epas.LastTransactionResponse@)">GetLastTransaction(String, out LastTransactionResponse)</h4>
  <div class="markdown level1 summary"><p>Get Last Transaction Details.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult GetLastTransaction(string terminalId, out LastTransactionResponse response)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">terminalId</span></td>
        <td><p>Terminal Id</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Westpay.Epas.LastTransactionResponse.html">LastTransactionResponse</a></td>
        <td><span class="parametername">response</span></td>
        <td><p>Transaction response</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>Standard ApiResult values</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_GetLastTransaction_System_String_Westpay_Epas_LastTransactionResponse___examples">Examples</h5>
  <pre><code>/// &lt;summary>
/// Get last transaction details.
/// &lt;/summary>
/// &lt;param name=&quot;terminalId&quot;>Terminal Id&lt;/param>
/// sending the transaction result&lt;/param>
public void LastTransaction(String terminalId)
 {

       LastTransactionResponse response;

       Log(&quot;API:  LastTransaction&quot;);
       ApiResult result = mEpas.GetLastTransaction(terminalId, out response);


       LogApiResult(result, &quot;Last Transaction: &quot; + response?.ToString());
 }</code></pre>

  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Connect.cs&amp;version=GBmain&amp;line=201">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_Login_" data-uid="Westpay.Epas.EpasClient.Login*"></a>
  <h4 id="Westpay_Epas_EpasClient_Login_Westpay_Epas_TerminalEnvironment_Westpay_Epas_LoginResponse__" data-uid="Westpay.Epas.EpasClient.Login(Westpay.Epas.TerminalEnvironment,Westpay.Epas.LoginResponse@)">Login(TerminalEnvironment, out LoginResponse)</h4>
  <div class="markdown level1 summary"><p>Sends a login request to the terminal.  The login request provides essential information to the terminal
and enables transactions to be run.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult Login(TerminalEnvironment environment, out LoginResponse response)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.TerminalEnvironment.html">TerminalEnvironment</a></td>
        <td><span class="parametername">environment</span></td>
        <td><p>Details of the terminal&apos;s operating environment and major parameters</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Westpay.Epas.LoginResponse.html">LoginResponse</a></td>
        <td><span class="parametername">response</span></td>
        <td><p>Response from the connect attempt</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>A standard <a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a> value</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_Login_Westpay_Epas_TerminalEnvironment_Westpay_Epas_LoginResponse___remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>
The Login method carries details of the operating environment for the terminal.
</p>
<p>
If the method returns <a class="xref" href="Westpay.Epas.ApiResult.html#Westpay_Epas_ApiResult_OK">OK</a> then the <code data-dev-comment-type="paramref" class="paramref">response</code> parameter contains the terminal’s response to the 
login request.
</p>
</div>
  <h5 id="Westpay_Epas_EpasClient_Login_Westpay_Epas_TerminalEnvironment_Westpay_Epas_LoginResponse___examples">Examples</h5>
  <pre><code>TerminalEnvironment te = new TerminalEnvironment()
{
    AuthorisationServer = new IPEndPoint(IPAddress.Parse(&quot;185.27.171.42&quot;), 55144),
    ConfigurationServer = new IPEndPoint(IPAddress.Parse(&quot;185.27.171.42&quot;), 55133),
    ISO639_1_LanguageCode = TerminalEnvironment.LangSwedish,
    OperatorId    = &quot;cashier_1&quot;,
    TerminalId    = &quot;80000082&quot;,
    StoreId       = &quot;store_1&quot;,
    WorkstationId = &apos;workstation_1&quot;
};

if (epas.Login(te, out LoginResponse lr) == ApiResult.OK)
{
    if (lr.LoggedIn)
    {
        ...</code></pre>

  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Connect.cs&amp;version=GBmain&amp;line=253">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_Logout_" data-uid="Westpay.Epas.EpasClient.Logout*"></a>
  <h4 id="Westpay_Epas_EpasClient_Logout_Westpay_Epas_LogoutResponse__" data-uid="Westpay.Epas.EpasClient.Logout(Westpay.Epas.LogoutResponse@)">Logout(out LogoutResponse)</h4>
  <div class="markdown level1 summary"><p>Sends a logout request to the terminal.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult Logout(out LogoutResponse response)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.LogoutResponse.html">LogoutResponse</a></td>
        <td><span class="parametername">response</span></td>
        <td><p>Response from the logout attempt</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>A standard ApiResult value</p>
</td>
      </tr>
    </tbody>
  </table>
  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Purchase.cs&amp;version=GBmain&amp;line=181">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_Purchase_" data-uid="Westpay.Epas.EpasClient.Purchase*"></a>
  <h4 id="Westpay_Epas_EpasClient_Purchase_System_Decimal_System_String_Westpay_Epas_TransactionResponse__" data-uid="Westpay.Epas.EpasClient.Purchase(System.Decimal,System.String,Westpay.Epas.TransactionResponse@)">Purchase(Decimal, String, out TransactionResponse)</h4>
  <div class="markdown level1 summary"><p>Starts a purchase transaction with only the purchase amount specified.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult Purchase(decimal purchaseAmount, string paymentMethod, out TransactionResponse response)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Decimal</span></td>
        <td><span class="parametername">purchaseAmount</span></td>
        <td><p>Transaction value</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">paymentMethod</span></td>
        <td><p>Name of alternative payment method to use</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Westpay.Epas.TransactionResponse.html">TransactionResponse</a></td>
        <td><span class="parametername">response</span></td>
        <td><p>Transaction result</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>Standard API outcome value</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_Purchase_System_Decimal_System_String_Westpay_Epas_TransactionResponse___examples">Examples</h5>
  <pre><code>/// &lt;summary>
/// Runs a simple purchase transaction for the given amount using Swish, if available. 
/// There is no cashback or swipe-ahead in this transaction.
/// &lt;/summary>
/// &lt;param name=&quot;amount&quot;>Transaction amount&lt;/param>
public void SimpleSwishPurchase(decimal amount)
{
    Log($&quot;Simple Swish-purchase of {amount:.00}&quot;);
    TransactionResponse response;
    ApiResult result = mEpas.Purchase(amount, “Swish”, out response);
    if (result == ApiResult.OK)
    {
        HandleTxnResponse(response);
    }
    LogApiResult(result, &quot;Simple Swish-purchase: &quot; + response?.ToString());
}</code></pre>

  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Purchase.cs&amp;version=GBmain&amp;line=149">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_Purchase_" data-uid="Westpay.Epas.EpasClient.Purchase*"></a>
  <h4 id="Westpay_Epas_EpasClient_Purchase_System_Decimal_Westpay_Epas_TransactionResponse__" data-uid="Westpay.Epas.EpasClient.Purchase(System.Decimal,Westpay.Epas.TransactionResponse@)">Purchase(Decimal, out TransactionResponse)</h4>
  <div class="markdown level1 summary"><p>Starts a purchase transaction with only the purchase amount specified.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult Purchase(decimal purchaseAmount, out TransactionResponse response)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Decimal</span></td>
        <td><span class="parametername">purchaseAmount</span></td>
        <td><p>Transaction value</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Westpay.Epas.TransactionResponse.html">TransactionResponse</a></td>
        <td><span class="parametername">response</span></td>
        <td><p>Transaction result</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>Standard API outcome value</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_Purchase_System_Decimal_Westpay_Epas_TransactionResponse___examples">Examples</h5>
  <pre><code>/// &lt;summary>
/// Runs a simple purchase transaction for the given amount. There is no cashback
/// or swipe-ahead in this transaction.
/// &lt;/summary>
/// &lt;param name=&quot;amount&quot;>Transaction amount&lt;/param>
public void SimplePurchase(decimal amount)
{
    Log($&quot;Simple purchase of {amount:.00}&quot;);
    TransactionResponse response;
    ApiResult result = mEpas.Purchase(amount, out response);
    if (result == ApiResult.OK)
    {
        HandleTxnResponse(response);
    }
    LogApiResult(result, &quot;Simple purchase: &quot; + response?.ToString());
}</code></pre>

  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Purchase.cs&amp;version=GBmain&amp;line=38">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_Purchase_" data-uid="Westpay.Epas.EpasClient.Purchase*"></a>
  <h4 id="Westpay_Epas_EpasClient_Purchase_Westpay_Epas_PurchaseRequest_Westpay_Epas_TransactionResponse__" data-uid="Westpay.Epas.EpasClient.Purchase(Westpay.Epas.PurchaseRequest,Westpay.Epas.TransactionResponse@)">Purchase(PurchaseRequest, out TransactionResponse)</h4>
  <div class="markdown level1 summary"><p>Begins a purchase transaction.  The method returns when the transaction is complete.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult Purchase(PurchaseRequest request, out TransactionResponse response)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.PurchaseRequest.html">PurchaseRequest</a></td>
        <td><span class="parametername">request</span></td>
        <td><p>Transaction parameters</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Westpay.Epas.TransactionResponse.html">TransactionResponse</a></td>
        <td><span class="parametername">response</span></td>
        <td><p>Transaction response</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>A standard ApiResult value</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_Purchase_Westpay_Epas_PurchaseRequest_Westpay_Epas_TransactionResponse___examples">Examples</h5>
  <pre><code>/// &lt;summary>
/// Runs a full-featured purchase transaction
/// &lt;/summary>
/// &lt;param name=&quot;amount&quot;>Purchase amount&lt;/param>
/// &lt;param name=&quot;cashback&quot;>Cashback amount&lt;/param>
public void PurchaseWithCashback(decimal amount, decimal cashback)
{
    Log($&quot;Purchase of {amount:.00} + {cashback:.00} cashback&quot;);
    TransactionResponse response;
    PurchaseRequest request = new PurchaseRequest
    {
        Amount = amount,
        CashbackAmount = cashback,
    };
    ApiResult result = mEpas.Purchase(request, out response);
    if (result == ApiResult.OK)
    {
        HandleTxnResponse(response);
    }
    LogApiResult(result, &quot;Purchase: &quot; + response?.ToString());
}</code></pre>

  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Purchase.cs&amp;version=GBmain&amp;line=97">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_Purchase_" data-uid="Westpay.Epas.EpasClient.Purchase*"></a>
  <h4 id="Westpay_Epas_EpasClient_Purchase_Westpay_Epas_PurchaseTransactionAmounts_Westpay_Epas_TransactionResponse__" data-uid="Westpay.Epas.EpasClient.Purchase(Westpay.Epas.PurchaseTransactionAmounts,Westpay.Epas.TransactionResponse@)">Purchase(PurchaseTransactionAmounts, out TransactionResponse)</h4>
  <div class="markdown level1 summary"><p>Begins a purchase transaction.  The method returns when the transaction is complete.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult Purchase(PurchaseTransactionAmounts transactionAmounts, out TransactionResponse response)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.PurchaseTransactionAmounts.html">PurchaseTransactionAmounts</a></td>
        <td><span class="parametername">transactionAmounts</span></td>
        <td><p>Transaction amounts</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Westpay.Epas.TransactionResponse.html">TransactionResponse</a></td>
        <td><span class="parametername">response</span></td>
        <td><p>Transaction response</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>A standard ApiResult value</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_Purchase_Westpay_Epas_PurchaseTransactionAmounts_Westpay_Epas_TransactionResponse___examples">Examples</h5>
  <pre><code>/// &lt;summary>
/// Runs a full-featured purchase transaction
/// &lt;/summary>
/// &lt;param name=&quot;amount&quot;>Purchase amount&lt;/param>
/// &lt;param name=&quot;cashback&quot;>Cashback amount&lt;/param>
public void PurchaseWithCashback(decimal amount, decimal cashback)
{
    Log($&quot;Purchase of {amount:.00} + {cashback:.00} cashback&quot;);
    TransactionResponse response;
    PurchaseTransactionAmounts txnAmount = new PurchaseTransactionAmounts(amount, cashback);
    ApiResult result = mEpas.Purchase(txnAmount, out response);
    if (result == ApiResult.OK)
    {
        HandleTxnResponse(response);
    }
    LogApiResult(result, &quot;Purchase: &quot; + response?.ToString());
}</code></pre>

  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Purchase.cs&amp;version=GBmain&amp;line=216">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_PurchaseBeforeAmount_" data-uid="Westpay.Epas.EpasClient.PurchaseBeforeAmount*"></a>
  <h4 id="Westpay_Epas_EpasClient_PurchaseBeforeAmount_Westpay_Epas_TransactionResponse__" data-uid="Westpay.Epas.EpasClient.PurchaseBeforeAmount(Westpay.Epas.TransactionResponse@)">PurchaseBeforeAmount(out TransactionResponse)</h4>
  <div class="markdown level1 summary"><p>Starts a purchase transaction with no amount.  The amount must be sent when available in
order for the transaction to be completed.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult PurchaseBeforeAmount(out TransactionResponse response)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.TransactionResponse.html">TransactionResponse</a></td>
        <td><span class="parametername">response</span></td>
        <td><p>Transaction result</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>Standard API outcome value</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_PurchaseBeforeAmount_Westpay_Epas_TransactionResponse___examples">Examples</h5>
  <pre><code>/// &lt;summary>
/// Runs a pre-amount purchase transaction, where the amount is supplied later.
/// Also known as swipe-ahead and pre-tap.
/// &lt;/summary>
public void PreAmountPurchase()
{
    Log(&quot;PreAmount purchase&quot;);
    TransactionResponse response;
    ApiResult result = mEpas.PurchaseBeforeAmount(out response);
    if (result == ApiResult.OK)
    {
        HandleTxnResponse(response);
    }
    LogApiResult(result, &quot;PreAmount purchase: &quot; + response?.ToString());
}</code></pre>

  <h5 id="Westpay_Epas_EpasClient_PurchaseBeforeAmount_Westpay_Epas_TransactionResponse___seealso">See Also</h5>
  <div class="seealso">
      <div><a class="xref" href="Westpay.Epas.EpasClient.html#Westpay_Epas_EpasClient_SendPurchaseAmounts_Westpay_Epas_PurchaseTransactionAmounts_">SendPurchaseAmounts(PurchaseTransactionAmounts)</a></div>
  </div>
  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Refund.cs&amp;version=GBmain&amp;line=65">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_Refund_" data-uid="Westpay.Epas.EpasClient.Refund*"></a>
  <h4 id="Westpay_Epas_EpasClient_Refund_System_Decimal_Westpay_Epas_TransactionResponse__" data-uid="Westpay.Epas.EpasClient.Refund(System.Decimal,Westpay.Epas.TransactionResponse@)">Refund(Decimal, out TransactionResponse)</h4>
  <div class="markdown level1 summary"><p>Begins a refund transaction.  The method returns when the transaction is complete.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult Refund(decimal refundAmount, out TransactionResponse response)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Decimal</span></td>
        <td><span class="parametername">refundAmount</span></td>
        <td><p>Amount to refund</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Westpay.Epas.TransactionResponse.html">TransactionResponse</a></td>
        <td><span class="parametername">response</span></td>
        <td><p>Transaction response</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>A standard ApiResult value</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_Refund_System_Decimal_Westpay_Epas_TransactionResponse___examples">Examples</h5>
  <pre><code>/// &lt;summary>
/// Runs a refund transaction
/// &lt;/summary>
/// &lt;param name=&quot;amount&quot;>Refund amount&lt;/param>
/// sending the transaction result&lt;/param>
public void Refund(decimal amount)
{
    Log($&quot;Refund of {amount:.00}&quot;);
    TransactionResponse response;
    ApiResult result = mEpas.Refund(amount, out response);
    if (result == ApiResult.OK)
    {
        HandleTxnResponse(response);
    }
    LogApiResult(result, &quot;Refund: &quot; + response?.ToString());
}</code></pre>

  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Refund.cs&amp;version=GBmain&amp;line=79">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_Refund_" data-uid="Westpay.Epas.EpasClient.Refund*"></a>
  <h4 id="Westpay_Epas_EpasClient_Refund_Westpay_Epas_AltMethodTransaction_Westpay_Epas_TransactionResponse__" data-uid="Westpay.Epas.EpasClient.Refund(Westpay.Epas.AltMethodTransaction,Westpay.Epas.TransactionResponse@)">Refund(AltMethodTransaction, out TransactionResponse)</h4>
  <div class="markdown level1 summary"><p>Begins a refund transaction where the transaction being refunded was completed using an
alternative payment method.  Alternative payment methods are where a card was not used
in the terminal.
The method returns when the transaction is complete.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult Refund(AltMethodTransaction transactionDetails, out TransactionResponse response)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.AltMethodTransaction.html">AltMethodTransaction</a></td>
        <td><span class="parametername">transactionDetails</span></td>
        <td><p>Transaction details</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Westpay.Epas.TransactionResponse.html">TransactionResponse</a></td>
        <td><span class="parametername">response</span></td>
        <td><p>Transaction response</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>A standard ApiResult value</p>
</td>
      </tr>
    </tbody>
  </table>
  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Refund.cs&amp;version=GBmain&amp;line=34">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_Refund_" data-uid="Westpay.Epas.EpasClient.Refund*"></a>
  <h4 id="Westpay_Epas_EpasClient_Refund_Westpay_Epas_RefundRequest_Westpay_Epas_TransactionResponse__" data-uid="Westpay.Epas.EpasClient.Refund(Westpay.Epas.RefundRequest,Westpay.Epas.TransactionResponse@)">Refund(RefundRequest, out TransactionResponse)</h4>
  <div class="markdown level1 summary"><p>Begins a refund transaction.  The method returns when the transaction is complete.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult Refund(RefundRequest request, out TransactionResponse response)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.RefundRequest.html">RefundRequest</a></td>
        <td><span class="parametername">request</span></td>
        <td><p>Transaction parameters</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Westpay.Epas.TransactionResponse.html">TransactionResponse</a></td>
        <td><span class="parametername">response</span></td>
        <td><p>Transaction response</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>A standard ApiResult value</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_Refund_Westpay_Epas_RefundRequest_Westpay_Epas_TransactionResponse___examples">Examples</h5>
  <pre><code>/// &lt;summary>
/// Runs a refund transaction
/// &lt;/summary>
/// &lt;param name=&quot;amount&quot;>Refund amount&lt;/param>
/// sending the transaction result&lt;/param>
public void Refund(decimal amount)
{
    Log($&quot;Refund of {amount:.00}&quot;);
    RefundRequest request = new RefundRequest { Amount = amount };
    TransactionResponse response;
    ApiResult result = mEpas.Refund(request, out response);
    if (result == ApiResult.OK)
    {
        HandleTxnResponse(response);
    }
    LogApiResult(result, &quot;Refund: &quot; + response?.ToString());
}</code></pre>

  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Misc.cs&amp;version=GBmain&amp;line=39">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_RequestAdministrativeOperation_" data-uid="Westpay.Epas.EpasClient.RequestAdministrativeOperation*"></a>
  <h4 id="Westpay_Epas_EpasClient_RequestAdministrativeOperation_Westpay_Epas_AdminOperation_Westpay_Epas_AdminResponse__" data-uid="Westpay.Epas.EpasClient.RequestAdministrativeOperation(Westpay.Epas.AdminOperation,Westpay.Epas.AdminResponse@)">RequestAdministrativeOperation(AdminOperation, out AdminResponse)</h4>
  <div class="markdown level1 summary"><p>Sends an administrative request to the terminal.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult RequestAdministrativeOperation(AdminOperation operation, out AdminResponse response)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.AdminOperation.html">AdminOperation</a></td>
        <td><span class="parametername">operation</span></td>
        <td><p>Administrative operation being requested</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Westpay.Epas.AdminResponse.html">AdminResponse</a></td>
        <td><span class="parametername">response</span></td>
        <td><p>Terminal response</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>Standard ApiResult value</p>
</td>
      </tr>
    </tbody>
  </table>
  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Misc.cs&amp;version=GBmain&amp;line=13">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_RequestTransactionAbort_" data-uid="Westpay.Epas.EpasClient.RequestTransactionAbort*"></a>
  <h4 id="Westpay_Epas_EpasClient_RequestTransactionAbort" data-uid="Westpay.Epas.EpasClient.RequestTransactionAbort">RequestTransactionAbort()</h4>
  <div class="markdown level1 summary"><p>Request that the current transaction should be aborted.  The transaction may be at a stage where an abort is
not possible, so the client must wait for the transaction result to be sent.  </p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult RequestTransactionAbort()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>A standard ApiResult value.  This indicates only if the request was sent to the
terminal.  The transaction result will indicate if the request was successful or not.</p>
</td>
      </tr>
    </tbody>
  </table>
  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Reversal.cs&amp;version=GBmain&amp;line=35">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_ReverseLastTransaction_" data-uid="Westpay.Epas.EpasClient.ReverseLastTransaction*"></a>
  <h4 id="Westpay_Epas_EpasClient_ReverseLastTransaction_System_String_Westpay_Epas_TransactionResponse__" data-uid="Westpay.Epas.EpasClient.ReverseLastTransaction(System.String,Westpay.Epas.TransactionResponse@)">ReverseLastTransaction(String, out TransactionResponse)</h4>
  <div class="markdown level1 summary"><p>Requests that the last transaction should be reversed.
Note that only approved transactions can be reversed, and that a reversal can only be applied
to the most recent transaction that was performed.  If an approved transaction is followed by
a declined transaction then the approved transaction can no longer be reversed.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult ReverseLastTransaction(string transactionReference, out TransactionResponse response)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">transactionReference</span></td>
        <td><p>Reference number of the transaction to be reversed, provided
in the TransactionResponse class.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Westpay.Epas.TransactionResponse.html">TransactionResponse</a></td>
        <td><span class="parametername">response</span></td>
        <td><p>The reversal response</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>A standard ApiResult value</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_ReverseLastTransaction_System_String_Westpay_Epas_TransactionResponse___examples">Examples</h5>
  <pre><code>/// &lt;summary>
/// Reverse the last transaction
/// &lt;/summary>
public void Reversal()
{
    Log(&quot;Reversal&quot;);
    TransactionResponse response;
    ApiResult result = mEpas.ReverseLastTransaction(txnRef.Text, out response);
    if (result == ApiResult.OK)
    {
        HandleTxnResponse(response);
    }
    LogApiResult(result, &quot;Reversal: &quot; + response?.ToString());
}</code></pre>

  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Purchase.cs&amp;version=GBmain&amp;line=246">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_SendPurchaseAmounts_" data-uid="Westpay.Epas.EpasClient.SendPurchaseAmounts*"></a>
  <h4 id="Westpay_Epas_EpasClient_SendPurchaseAmounts_Westpay_Epas_PurchaseTransactionAmounts_" data-uid="Westpay.Epas.EpasClient.SendPurchaseAmounts(Westpay.Epas.PurchaseTransactionAmounts)">SendPurchaseAmounts(PurchaseTransactionAmounts)</h4>
  <div class="markdown level1 summary"><p>Sends the amounts for a Purchase before Amount transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult SendPurchaseAmounts(PurchaseTransactionAmounts transactionAmount)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.PurchaseTransactionAmounts.html">PurchaseTransactionAmounts</a></td>
        <td><span class="parametername">transactionAmount</span></td>
        <td><p>Transaction amounts</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>Standard API outcome value</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Westpay_Epas_EpasClient_SendPurchaseAmounts_Westpay_Epas_PurchaseTransactionAmounts__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>A purchase transaction with zero amounts must have been started
before this method can be called.</p>
</div>
  <h5 id="Westpay_Epas_EpasClient_SendPurchaseAmounts_Westpay_Epas_PurchaseTransactionAmounts__examples">Examples</h5>
  <pre><code>/// &lt;summary>
/// Send the transaction amounts for a pre-amount purchase transaction.
/// &lt;/summary>
/// &lt;param name=&quot;amount&quot;>Purchase amount&lt;/param>
/// &lt;param name=&quot;cashback&quot;>Cashback amount&lt;/param>
public void SendAmounts(decimal amount, decimal cashback)
{
    Log($&quot;Sending amounts: {amount:.00} + {cashback:.00} cashback&quot;);
    PurchaseTransactionAmounts txnAmount = new PurchaseTransactionAmounts(amount, cashback);
    LogApiResult(mEpas.SendPurchaseAmounts(txnAmount), &quot;SendPurchaseAmounts&quot;);
}</code></pre>

  <h5 id="Westpay_Epas_EpasClient_SendPurchaseAmounts_Westpay_Epas_PurchaseTransactionAmounts__seealso">See Also</h5>
  <div class="seealso">
      <div><a class="xref" href="Westpay.Epas.EpasClient.html#Westpay_Epas_EpasClient_PurchaseBeforeAmount_Westpay_Epas_TransactionResponse__">PurchaseBeforeAmount(out TransactionResponse)</a></div>
  </div>
  
  <span class="small pull-right mobile-hide">
    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Sender.cs&amp;version=GBmain&amp;line=169">View Source</a>
  </span>
  <a id="Westpay_Epas_EpasClient_SendRawXml_" data-uid="Westpay.Epas.EpasClient.SendRawXml*"></a>
  <h4 id="Westpay_Epas_EpasClient_SendRawXml_System_String_" data-uid="Westpay.Epas.EpasClient.SendRawXml(System.String)">SendRawXml(String)</h4>
  <div class="markdown level1 summary"><p>Sends raw EPAS XML messages to the terminal.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ApiResult SendRawXml(string xml)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">xml</span></td>
        <td><p>EPAS XML message</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Westpay.Epas.ApiResult.html">ApiResult</a></td>
        <td><p>Standard API result indicating the outcome of the send attempt</p>
</td>
      </tr>
    </tbody>
  </table>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://dev.azure.com/west-pay/payment-terminals/_git/epas-client-library?path=dotnet/EpasClientLibrary/EpasClient.part.Wrapper.cs&amp;version=GBmain&amp;line=11" class="contribution-link">View Source</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
